<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Demo Clothing Store</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --tg-theme-bg-color: #ffffff;
            --tg-theme-text-color: #222222;
            --tg-theme-button-color: #3390ec;
            --tg-theme-button-text-color: #ffffff;
            --tg-theme-hint-color: #707579;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--tg-theme-bg-color);
            color: var(--tg-theme-text-color);
            margin: 0; padding: 0;
            padding-bottom: 80px; /* –ú–µ—Å—Ç–æ –ø–æ–¥ –Ω–∏–∂–Ω–µ–µ –º–µ–Ω—é */
        }

        /* –®–∞–ø–∫–∞ */
        header {
            padding: 20px; text-align: center;
            border-bottom: 1px solid #f0f0f0;
        }

        /* –≠–∫—Ä–∞–Ω—ã (–°–µ–∫—Ü–∏–∏) */
        .screen { display: none; padding: 15px; }
        .screen.active { display: block; }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ */
        .product-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px;
        }
        .product-card {
            border: 1px solid #eee; border-radius: 12px; overflow: hidden;
            display: flex; flex-direction: column;
        }
        .product-img {
            width: 100%; aspect-ratio: 1/1; background: #f9f9f9;
            display: flex; align-items: center; justify-content: center; font-size: 40px;
        }
        .product-info { padding: 10px; flex-grow: 1; }
        .price { font-weight: bold; color: var(--tg-theme-button-color); }
        
        .add-btn {
            background: var(--tg-theme-button-color);
            color: var(--tg-theme-button-text-color);
            border: none; width: 100%; padding: 8px;
            border-radius: 8px; margin-top: 5px; cursor: pointer;
        }

        /* –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é (–ù–∞–≤–∏–≥–∞—Ü–∏—è) */
        .nav-bar {
            position: fixed; bottom: 0; width: 100%;
            background: #fff; border-top: 1px solid #eee;
            display: flex; justify-content: space-around; padding: 10px 0;
        }
        .nav-item {
            background: none; border: none; color: var(--tg-theme-hint-color);
            font-size: 12px; cursor: pointer;
        }
        .nav-item.active { color: var(--tg-theme-button-color); font-weight: bold; }

        /* –ö–æ—Ä–∑–∏–Ω–∞ */
        .cart-item {
            display: flex; justify-content: space-between;
            padding: 10px 0; border-bottom: 1px solid #eee;
        }
    </style>
</head>
<body>

<header>
    <h3 id="header-title">–ö–∞—Ç–∞–ª–æ–≥ –æ–¥–µ–∂–¥—ã</h3>
</header>

<div id="catalog-screen" class="screen active">
    <div class="product-grid">
        <div class="product-card">
            <div class="product-img">üëï</div>
            <div class="product-info">
                <div>–§—É—Ç–±–æ–ª–∫–∞ Oversize</div>
                <div class="price">2 500 ‚ÇΩ</div>
                <button class="add-btn" onclick="addToCart('–§—É—Ç–±–æ–ª–∫–∞', 2500)">–í –∫–æ—Ä–∑–∏–Ω—É</button>
            </div>
        </div>
        <div class="product-card">
            <div class="product-img">üß•</div>
            <div class="product-info">
                <div>–•—É–¥–∏ Basic</div>
                <div class="price">4 500 ‚ÇΩ</div>
                <button class="add-btn" onclick="addToCart('–•—É–¥–∏', 4500)">–í –∫–æ—Ä–∑–∏–Ω—É</button>
            </div>
        </div>
    </div>
</div>

<div id="cart-screen" class="screen">
    <div id="cart-list">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>
    <hr>
    <div id="cart-total"></div>
</div>

<div id="profile-screen" class="screen">
    <p>üëã –ü—Ä–∏–≤–µ—Ç, <span id="user-name">–ö–ª–∏–µ–Ω—Ç</span>!</p>
    <p>–¢—É—Ç –±—É–¥–µ—Ç –∏—Å—Ç–æ—Ä–∏—è —Ç–≤–æ–∏—Ö –∑–∞–∫–∞–∑–æ–≤ –∏ –±–æ–Ω—É—Å—ã.</p>
</div>

<div class="nav-bar">
    <button class="nav-item active" onclick="showScreen('catalog', this)">üõç –ú–∞–≥–∞–∑–∏–Ω</button>
    <button class="nav-item" onclick="showScreen('cart', this)">üõí –ö–æ—Ä–∑–∏–Ω–∞</button>
    <button class="nav-item" onclick="showScreen('profile', this)">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>
</div>

<script>
    let tg = window.Telegram.WebApp;
    tg.expand();

    let cart = [];
    document.getElementById('user-name').innerText = tg.initDataUnsafe.user?.first_name || "–ü–æ–∫—É–ø–∞—Ç–µ–ª—å";

    function showScreen(screenId, btn) {
        // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —ç–∫—Ä–∞–Ω—ã
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        // –°–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–æ–∫
        document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–π
        document.getElementById(screenId + '-screen').classList.add('active');
        btn.classList.add('active');

        // –ú–µ–Ω—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
        const titles = {catalog: '–ö–∞—Ç–∞–ª–æ–≥ –æ–¥–µ–∂–¥—ã', cart: '–ö–æ—Ä–∑–∏–Ω–∞', profile: '–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å'};
        document.getElementById('header-title').innerText = titles[screenId];
    }

    function addToCart(name, price) {
        cart.push({name, price});
        updateCart();
        tg.HapticFeedback.impactOccurred('medium'); // –í–∏–±—Ä–æ–æ—Ç–∫–ª–∏–∫ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏
    }

    function updateCart() {
        const cartList = document.getElementById('cart-list');
        const cartTotal = document.getElementById('cart-total');
        
        if (cart.length === 0) {
            cartList.innerHTML = "–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞";
            tg.MainButton.hide();
        } else {
            cartList.innerHTML = cart.map(item => `
                <div class="cart-item">
                    <span>${item.name}</span>
                    <span>${item.price} ‚ÇΩ</span>
                </div>
            `).join('');
            
            let total = cart.reduce((sum, item) => sum + item.price, 0);
            cartTotal.innerHTML = `<strong>–ò—Ç–æ–≥–æ: ${total} ‚ÇΩ</strong>`;
            
            tg.MainButton.text = "–û–§–û–†–ú–ò–¢–¨ –ó–ê–ö–ê–ó";
            tg.MainButton.show();
        }
    }

    tg.onEvent('mainButtonClicked', function() {
        tg.sendData(JSON.stringify(cart)); // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É
    });
</script>

</body>
</html>
